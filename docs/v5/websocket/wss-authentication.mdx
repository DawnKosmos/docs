---
title: Connect
sidebar_label: Connect
slug: /v5/ws/connect
---

**Base endpoints:**<br/>
**WebSocket public channel:**
- **Mainnet:**<br/>
Spot: wss://stream.bybit.com/v5/public/spot<br/>
Linear contract: wss://stream.bybit.com/v5/public/linear<br/>
Inverse contract: wss://stream.bybit.com/v5/public/inverse<br/>
USDC Option: wss://stream.bybit.com/v5/public/option

- **Testnet:**<br/>
Spot: wss://stream-testnet.bybit.com/v5/public/spot<br/>
Linear contract: wss://stream-testnet.bybit.com/v5/public/linear<br/>
Inverse contract: wss://stream-testnet.bybit.com/v5/public/inverse<br/>
USDC Option: wss://stream-testnet.bybit.com/v5/public/option

**WebSocket private channel:**
- **Mainnet:**<br/>
wss://stream.bybit.com/v5/private<br/>

- **Testnet:**<br/>
wss://stream-testnet.bybit.com/v5/private

## Authentication
:::info
<b>Public</b> topics do not require authentication. The following section applies to <b>private</b> topics only.
:::

<p>Apply for authentication when establishing a connection.</p>
<p>Note: if you're using <a href="https://github.com/bybit-exchange/pybit">pybit</a> or another high-level library, you can ignore this code - as authentication is handled for you.</p>

```json
{
    "req_id": "10001", // optional
    "op": "auth",
    "args": [
        "api_key",
        1662350400000, //expires greater than currentTimeStamp
        "singature"
    ]
}
```

```python
# based on: https://github.com/bybit-exchange/pybit/blob/master/pybit/_http_manager.py

import hmac
import json
import time
import websocket

api_key = ""
api_secret = ""

# Generate expires.
expires = int((time.time() + 1) * 1000)

# Generate signature.
signature = str(hmac.new(
    bytes(api_secret, "utf-8"),
    bytes(f"GET/realtime{expires}", "utf-8"), digestmod="sha256"
).hexdigest())

ws = websocket.WebSocketApp(
    url=url,
    ...
)

# Authenticate with API.
ws.send(
    json.dumps({
        "op": "auth",
        "args": [api_key, expires, signature]
    })
)
```

> Authentication success sample response

```json
{
    "success": true,
    "ret_msg": "",
    "op": "auth",
    "conn_id": "cejreaspqfh3sjdnldmg-p"
}
```

:::note
Example signature algorithms can be found <a href="https://github.com/bybit-exchange/api-usage-examples">here</a>.
:::

:::caution
Due to network complexity, your may get disconnected at any time. Please follow the instructions below to ensure that you receive WebSocket messages on time:
1. Keep connection alive by [sending heartbeat packet](connect#how-to-send-heartbeat-packet)
2. Reconnect as soon as possible if disconnected
:::

## IP Limits
* Do not frequently connect and disconnect the connection.
* Do not build over 500 connections in 5 minutes.

## How to Send Heartbeat Packet
How to Send

```javascript
// req_id is a customised id, which is optional
ws.send(JSON.stringify({"req_id": "100001", "op": "ping"}));
```

> Pong message example

```json
{
    "req_id": "test",
    "op": "pong",
    "args": [
    "1671163042443"
    ],
    "conn_id": "ce3e06kfnonvuu2e3j4g-2t5w"
}
```

:::caution
To avoid networks or program issues, we recommend that you send the <code>ping</code> heartbeat packet every <b>20</b> seconds to maintain the WebSocket connection.
:::

## How to Subscribe to Topics
### Understanding Websocket Filters

How to subscribe with a filter

```json
// Subscribing level 1 orderbook
{
    "req_id": "test", // optional
    "op": "subscribe",
    "args": [
        "orderbook.1.BTCUSDT"
    ]
}
```

Support subscribe multiple symbols and topics, separate with ','.

```json
{
    "req_id": "test", // optional
    "op": "subscribe",
    "args": [
        "orderbook.1.BTCUSDT",
        "publicTrade.BTCUSDT"ï¼Œ
        "orderbook.1.ETHUSDT",
    ]
}
```

### Understanding Websocket Filters unsubscription

You can dynamically subscribe and unsubscribe from topics without websocket disconnection as follows:

```json
{
    "op": "unsubscribe",
    "args": [
        "publicTrade.ETHUSD"
    ],
    "req_id": "customised_id"
}
```

## Understanding Subscription Response
> Topic subscription response message example

```json
{
    "success": true,
    "ret_msg": "",
    "op": "subscribe",
    "conn_id": "cejreaspqfh3sjdnldmg-s"
}
```